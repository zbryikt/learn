(function(){function t(t,e){var a={}.hasOwnProperty;for(var n in e)a.call(e,n)&&(t[n]=e[n]);return t}var e,a;(e=function(e){var a,n=this;return this.opt=e,this.cls={tab:{className:["ldtab"],classIn:["ldtab-in"],classOut:["ldtab-out"],delay:350},panel:{className:["ldtab-panel"],classIn:["ldtab-panel-in"],classOut:["ldtab-panel-out"],delay:350}},t(this.cls.tab,e.tab||{}),t(this.cls.panel,e.panel||{}),this.evtHandler={},["tab","panel"].map(function(t){return["className","classIn","classOut"].map(function(e){if("string"==typeof n.cls[t][e])return n.cls[t][e]=n.cls[t][e].split(" ").filter(function(t){return t.trim()})})}),a=e.root,this.root=a="string"==typeof a?document.querySelector(a):a||null,this.active={},this.pends={},this.group={},(null==e.autoInit||e.autoInit)&&this.init(),this}).prototype=t(Object.create(Object.prototype),{on:function(t,e){var a;return((a=this.evtHandler)[t]||(a[t]=[])).push(e)},fire:function(t){var e,a,n,r,s,l,i,c=[];for(a=[],n=1,r=arguments.length;n<r;++n)a.push(arguments[n]);for(e=a,n=0,l=(s=this.evtHandler[t]||[]).length;n<l;++n)i=s[n],c.push(i.apply(this,e));return c},init:function(){return this.add(Array.from(this.root.querySelectorAll("[ldtab]")))},parse:function(t){var e,a,n,r,s,l;for(e=t;e&&e!==this.root&&(!e.matches||e.matches&&!e.matches("[ldtab-group]"));)e=e.parentNode;return a=e&&e.matches&&e.matches("[ldtab-group]")?e:null,n=(a||t).getAttribute("ldtab-group"),r=t.getAttribute("ldtab"),(s=a?a.getAttribute("type"):null)||(s=t.getAttribute("type")),s="tab"===s,l=t.hasAttribute("default")&&"false"!==t.getAttribute("default"),{group:n,name:r,tab:s,active:l}},add:function(t){var e=this;return(t=Array.isArray(t)?t:[t]).map(function(t){var a,n,r,s,l,i,c,u;if(a=e.parse(t),n=a.group,r=a.name,s=a.tab,l=a.active,i=(a=(c=e.group)[n]||(c[n]={}))[r]||(a[r]={}),t._ldtab_debounce||(u=e.cls[s?"tab":"panel"].delay)&&(t._ldtab_debounce=debounce(u,function(){return t.classList.remove("active")})),s?(i.tab=(i.tab||(i.tab=[])).concat([t]),t.classList.add(e.cls.tab.className),t.addEventListener("click",function(){return e.toggle({group:n,name:r})})):(i.panel=(i.panel||(i.panel=[])).concat([t]),t.classList.add(e.cls.panel.className)),l)return e.toggle({group:n,name:r})})},update:function(t){var e,a,n,r,s,l,i=this;return e=t.group,a=t.name,n=t.active,r=(s=(l=this.group)[e]||(l[e]={}))[a]||(s[a]={}),["tab","panel"].map(n?function(t){return(r[t]||(r[t]=[])).map(function(e){if(!e.classList.contains("active"))return i.cls[t].activate?i.cls[t].activate({node:e}):(e._ldtab_debounce&&e._ldtab_debounce.clear(),e.classList.remove(i.cls[t].classOut),e.classList.add(i.cls[t].classIn),e.classList.add("active"))})}:function(t){return(r[t]||(r[t]=[])).map(function(e){if(e.classList.contains("active"))return i.cls[t].deactivate?i.cls[t].deactivate({node:e}):(e._ldtab_debounce?e._ldtab_debounce():e.classList.remove("active"),e.classList.remove(i.cls[t].classIn),e.classList.add(i.cls[t].classOut))})}),r.active=n},toggle:function(t){var e,a,n,r,s,l=this;return e=t.group,a=t.name,(n=this.group)[e]||(n[e]={}),function(){var t,a=[];for(r in t=this.group[e])s=t[r],a.push(r);return a}.call(this).filter(function(t){return t!==a}).map(function(t){return l.update({group:e,name:t,active:!1})}),this.update({group:e,name:a,active:!0}),this.fire("on",{group:e,name:a})}}),a={},e.init=function(t){return a.ldtab=new e(t),a.ldtab.add(Array.from(document.querySelectorAll("[ldtab]")))},"undefined"!=typeof module&&null!==module?module.exports=e:"undefined"!=typeof window&&null!==window&&(window.ldtab=e)}).call(this);
